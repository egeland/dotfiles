- clean: ['~']

- link:
    ~/.profile: profile
    ~/.bash_profile: bash_profile
    ~/.bashrc: bashrc
    ~/.bash_aliases: bash_aliases
    ~/.gitconfig: gitconfig
    ~/.ssh/config:
        path: ssh/config
        create: true
    ~/.zshrc: zshrc
    ~/bin:
        path: bin/
        create: true
    ~/.config/karabiner:
        path: karabiner
        create: true
    ~/.config/fish:
        path: fish
        create: true

- shell:
    -
        description: Install homebrew if needed
        command: which brew || /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
    -
        description: Install homebrew-managed items
        command: brew bundle check || ./homebrew/install.sh
        stdout: true
        stdin: true
    -
        description: Switch to brew-installed bash
        command: export BREW_PREFIX=$(brew --prefix); if ! fgrep -q "${BREW_PREFIX}/bin/bash" /etc/shells; then echo "${BREW_PREFIX}/bin/bash" | sudo tee -a /etc/shells; chsh -s "${BREW_PREFIX}/bin/bash"; fi;
    -
        description: Install VS Code extensions
        command: ./vscode/install.sh
    -
        description: Set up python virtual env
        command: ./python/install.sh
    -
        description: Retrieve SSH keys
        command: ./ssh/install.sh
        stdin: true
        stdout: true
